# TradingAgents: 多智能體大語言模型金融交易框架

**作者**: Yijia Xiao¹'³, Edward Sun¹'³, Di Luo¹'², Wei Wang¹'³

¹ 加州大學洛杉矶分校 (UCLA)  
² 麻省理工學院 (MIT)  
³ Tauric Research

**項目地址**: https://github.com/TauricResearch/TradingAgents

---

## 摘要

在使用大語言模型(LLM)驱動的智能體社會進行自動化問題解決方面已經取得了重大進展。在金融領域，研究主要集中在處理特定任務的單智能體系統或獨立收集數據的多智能體框架上。然而，多智能體系統複制真實世界交易公司協作動態的潜力仍未得到充分探索。

**TradingAgents** 提出了一個受交易公司啟發的新颖股票交易框架，具有專門角色的LLM驱動智能體，如基本面分析師、情绪分析師、技術分析師和具有不同風險偏好的交易員。该框架包括評估市場狀况的多头和空头研究員智能體、監控風險敞口的風險管理团隊，以及综合辩論见解和歷史數據做出明智決策的交易員。

通過模擬動態、協作的交易環境，该框架旨在提高交易表現。詳細的架構設計和廣泛的實驗表明其相對於基準模型的優越性，在累積收益、夏普比率和最大回撤方面都有顯著改進，突出了多智能體LLM框架在金融交易中的潜力。

---

## 1. 引言

金融市場的複雜性和動態性质使得有效的交易策略開發成為一項具有挑战性的任務。傳統的交易方法通常依賴於預定義的規則、技術指標或機器學习模型，這些方法在適應快速變化的市場條件方面存在局限性。近年來，大語言模型(LLM)的出現為金融應用開辟了新的可能性，特別是在自動化交易和投資決策方面。

LLM在理解和生成人類語言方面表現出了卓越的能力，使其能夠處理和分析大量的文本數據，包括新聞文章、財務報告和社交媒體內容。這種能力使LLM特別適合金融應用，在這些應用中，定性信息通常与定量數據一樣重要。

然而，大多數現有的基於LLM的交易系統都是作為單智能體框架設計的，其中單個模型负责整個交易過程。虽然這些系統在某些任務上表現出了有希望的結果，但它們未能捕捉到真實世界交易公司的協作和專業化性质。

在實际的交易環境中，決策是通過多個專家的協作努力做出的，每個專家都有自己的專業領域和觀點。基本面分析師評估公司的財務健康狀况，技術分析師研究價格模式和市場趋势，而風險管理者確保交易決策符合風險參數。這種專業化和協作使交易公司能夠做出更明智和平衡的投資決策。

受這種現實世界結構的啟發，我們提出了**TradingAgents**，這是一個多智能體LLM框架，模擬交易公司的協作動態。我們的框架由几個專門的智能體組成，每個智能體都有明確定義的角色和责任：

- **分析師团隊**: 包括基本面分析師、情绪分析師、新聞分析師和技術分析師
- **研究团隊**: 由持多头和空头觀點的研究員組成，進行辩論和評估
- **交易員**: 基於分析師和研究員的见解做出交易決策
- **風險管理团隊**: 監控和控制投資組合的風險敞口

這些智能體通過結構化的通信協议進行交互，確保信息在整個系統中有效流動。通過利用多個專門智能體的集體智慧，TradingAgents旨在做出更準確和穩健的交易決策。

我們在2024年1月1日至3月29日期間對包括苹果、英伟達、微软、Meta和谷歌在內的主要科技股進行了全面的回測評估。結果表明，TradingAgents在累積收益、年化收益、夏普比率和最大回撤等關键財務指標上顯著優於傳統的交易策略。

## 2. 相關工作

### 2.1 LLM作為金融助手

大語言模型通過在金融數據上進行微調或在金融語料庫上训練來應用於金融領域。這提高了模型對金融術語和數據的理解，使其能夠成為分析支持、洞察和信息檢索的專業助手，而不是交易執行。

**金融領域微調的LLM**

微調增强了特定領域的性能。例子包括PIXIU (FinMA)，它在136K金融相關指令上微調了LLaMA；FinGPT，使用LoRA微調了LLaMA和ChatGLM等模型，使用了約50K金融特定樣本；以及Instruct-FinGPT，在來自金融情绪分析數據集的10K指令樣本上進行微調。這些模型在金融分類任務上優於其基础版本和其他開源LLM如BLOOM和OPT，甚至在几個評估中超過了BloombergGPT。然而，在生成任務中，它們的表現与强大的通用模型如GPT-4相似或略差，表明需要更多高质量的特定領域數據集。

**從头開始训練的金融LLM**

在金融特定語料庫上從头開始训練LLM旨在更好的領域適應。像BloombergGPT、XuanYuan 2.0和Fin-T5這樣的模型在預训練期間将公共數據集与金融特定數據相結合。例如，BloombergGPT在通用和金融文本上训練，專有的Bloomberg數據增强了其在金融基準上的性能。這些模型在市場情绪分類和摘要等任務上優於通用對應模型如BLOOM-176B和T5。虽然它們可能無法匹配更大的闭源模型如GPT-3或PaLM，但它們在類似規模的開源模型中提供了競爭性能，而不會損害一般語言理解。

总之，通過微調或從头開始训練開發的金融特定LLM在特定領域任務上顯示出顯著改進，强調了領域適應的重要性以及通過高质量金融特定數據集進一步增强的潜力。

### 2.2 LLM作為交易員

LLM作為交易員智能體，通過分析新聞、財務報告和股價等外部數據做出直接的交易決策。提出的架構包括新聞驱動、推理驱動和强化學习(RL)驱動的智能體。

**新聞驱動智能體**

新聞驱動架構将股票新聞和宏觀經濟更新整合到LLM提示中，以預測股價走势。評估闭源模型(如GPT-3.5、GPT-4)和開源LLM(如Qwen、Baichuan)在金融情绪分析中的研究顯示了基於情绪評分的簡單多空策略的有效性。對微調LLM如FinGPT和OPT的進一步研究表明，通過特定領域對齊可以改善性能。高級方法涉及总結新聞數據並推理它們与股價的關系。

**推理驱動智能體**

推理驱動智能體通過反思和辩論等機制增强交易決策。反思驱動智能體，如FinMem和FinAgent，使用分層記忆化和多模態數據将輸入总結為記忆，為決策提供信息，並結合技術指標，在减轻幻觉的同時實現優越的回測性能。辩論驱動智能體，如異構框架和TradingGPT中的那些，通過在具有不同角色的智能體之間進行LLM辩論來增强推理和事實有效性，改善情绪分類並增加交易決策的穩健性。

**强化學习驱動智能體**

强化學习方法将LLM輸出与預期行為對齊，使用回測作為奖勵。SEP採用帶有記忆化和反思的RL來基於市場歷史細化LLM預測。經典RL方法也用於将LLM生成的嵌入与股票特征集成的交易框架中，通過近端策略優化(PPO)等算法進行训練。

### 2.3 LLM作為Alpha挖掘器

LLM也被用於生成alpha因子而不是做出直接的交易決策。QuantAgent通過利用LLM通過內循環和外循環架構產生alpha因子來證明這一點。在內循環中，寫手智能體從交易員的想法生成腳本，而評判智能體提供反馈。在外循環中，代碼在真實市場中測試，交易結果增强評判智能體。這種方法能夠逐步逼近最優行為。

後续研究，如AlphaGPT，提出了一個用於alpha挖掘的人在環框架，具有類似的架構。這两項研究都展示了LLM驱動的alpha挖掘系統的有效性，突出了它們在通過生成和細化alpha因子來自動化和加速交易策略開發方面的潜力。

## 3. TradingAgents: 角色專業化

為LLM智能體分配清晰、明確定義的角色和特定目標，能夠将複雜的目標分解為更小、可管理的子任務。金融交易是這種複雜性的典型例子，需要整合多樣化的信號、輸入和專業知识。在現實世界中，這種管理複雜性的方法通過依賴專家团隊協作和做出高風險決策的交易公司得到證明，强調了任務的多面性。

在典型的交易公司中，收集大量數據，包括財務指標、價格走势、交易量、歷史表現、經濟指標和新聞情绪。然後由量化專家(量化分析師)分析這些數據，包括數學家、數據科學家和工程師，使用先進的工具和算法來识別趋势和預測市場走势。

受這種組織結構的啟發，TradingAgents在模擬交易公司內定義了七個不同的智能體角色：基本面分析師、情绪分析師、新聞分析師、技術分析師、研究員、交易員和風險管理者。每個智能體都被分配了特定的名稱、角色、目標和一套約束，以及為其功能量身定制的預定義上下文、技能和工具。例如，情绪分析師配备了網絡搜索引擎、Reddit搜索API、X/Twitter搜索工具和情绪評分計算算法等工具，而技術分析師可以執行代碼、計算技術指標和分析交易模式。更具體地說，TradingAgents假設以下团隊。

### 3.1 分析師团隊

分析師团隊由负责收集和分析各種類型市場數據以為交易決策提供信息的專業智能體組成。每個智能體專註於市場分析的特定方面，汇集市場狀况的全面視圖。

- **基本面分析師智能體**: 這些智能體通過分析財務報表、收益報告、內部交易和其他相關數據來評估公司基本面。它們評估公司的內在價值以识別被低估或高估的股票，提供對長期投資潜力的洞察。

- **情绪分析師智能體**: 這些智能體處理大量社交媒體帖子、情绪評分和從公共信息和社交媒體活動中得出的內部情绪。它們衡量市場情绪以預測集體投資者行為如何在短期內影響股價。

- **新聞分析師智能體**: 這些智能體分析新聞文章、政府公告和其他宏觀經濟指標，以評估市場的宏觀經濟狀態、重大世界事件和重要公司變化。它們识別可能影響市場走势的新聞事件，幫助預測市場動態的突然變化。

- **技術分析師智能體**: 這些智能體計算和選擇相關的技術指標，如移動平均收敛發散(MACD)和相對强弱指數(RSI)，為特定資產定制。它們分析價格模式和交易量以預測未來價格走势，協助確定進入和退出點的時機。

分析師团隊综合來自多個來源的數據，提供全面的市場分析。他們的综合洞察構成了研究团隊的基础輸入，確保在後续決策過程中考慮市場的所有方面。

### 3.2 研究团隊

研究团隊负责批判性評估分析師团隊提供的信息。由採用多头和空头觀點的智能體組成，他們進行多轮辩論以評估投資決策的潜在風險和收益。

- **多头研究員**: 這些智能體通過突出積極指標、增長潜力和有利的市場條件來倡導投資機會。他們構建支持在某些資產中啟動或繼续持仓的論據。

- **空头研究員**: 相反，這些智能體專註於潜在的下行風險、風險和不利的市場信號。他們提供谨慎的洞察，质疑投資策略的可行性並突出可能的负面結果。

通過這種辩證過程，研究团隊旨在達到對市場情况的平衡理解。他們的彻底分析有助於识別最有前景的投資策略，同時預測可能的挑战，從而幫助交易員智能體做出明智的決策。

### 3.3 交易員智能體

交易員智能體负责基於分析師团隊提供的综合分析和研究团隊的細致觀點執行交易決策。他們評估综合信息，考慮定量數據和定性洞察，以確定最優的交易行動。

TradingAgents交易員的任務包括：

- 評估來自分析師和研究員的建议和洞察
- 決定交易的時機和規模以最大化交易回報
- 在市場中下達买入或卖出订單
- 響應市場變化和新信息調整投資組合配置

交易員智能體必须平衡潜在回報与相關風險，在動態市場環境中做出及時決策。他們的行動直接影響公司的表現，需要高度的精確性和战略思維。

### 3.4 風險管理团隊

風險管理团隊監控和控制公司對各種市場風險的敞口。這些智能體持续評估投資組合的風險概况，確保交易活動保持在預定義的風險參數內並符合監管要求。

風險管理团隊的職责包括：

- 評估市場波動性、流動性和交易對手風險等因素
- 實施風險緩解策略，如設置止損订單或分散持仓
- 向交易員智能體提供關於風險敞口的反馈並建议調整交易策略
- 確保整體投資組合与公司的風險承受能力和投資目標保持一致

通過提供監督和指導，風險管理团隊幫助維持公司的財務穩定並防範不利的市場事件。他們在保護資產和確保可持续的長期表現方面發挥關键作用。

TradingAgents中的所有智能體都遵循ReAct提示框架，该框架協同推理和行動。環境狀態由智能體共享和監控，使他們能夠採取適合上下文的行動，如進行研究、執行交易、參与辩論或管理風險。這種設計確保了反映真實世界交易系統的協作、動態決策過程。

## 4. TradingAgents: 智能體工作流程

### 4.1 通信協议

大多數現有的基於LLM的智能體框架使用自然語言作為主要通信接口，通常通過結構化消息歷史或智能體生成消息的集合。然而，仅依賴自然語言通常不足以解決需要廣泛規劃視野的複雜、長期任務。在這種情况下，純自然語言通信可能類似於傳話游戏——在多次迭代中，由於上下文長度限制和掩蓋關键早期細節的文本過載，初始信息可能被遺忘或扭曲。

為了解決這一限制，我們從MetaGPT等框架中汲取灵感，採用結構化的通信方法。我們的模型引入了結構化通信協议來管理智能體交互。通過清楚地定義每個智能體的狀態，我們確保每個角色只提取或查詢必要的信息，處理它，並返回完成的報告。這種簡化的方法减少了不必要的步骤，降低了消息損坏的風險，並保持交互的專註和高效，即使在複雜的長期任務中也是如此。

### 4.2 智能體交互類型

与以往嚴重依賴自然語言對話的多智能體交易框架相比，TradingAgents智能體主要通過結構化文档和圖表進行通信。這些文档将智能體的洞察封裝在簡潔、組織良好的報告中，保留基本內容同時避免無關信息。通過利用結構化報告，智能體可以直接從全局狀態查詢必要的細節，消除了可能稀釋信息、無限期延長消息狀態並導致數據丢失的冗長對話的需要。

**I. 分析師团隊**: 基本面、情绪、新聞和技術分析師将他們的研究和發現編譯成特定於其專業領域的簡潔分析報告。這些報告包括基於其專業分析的關键指標、洞察和建议。

**II. 交易員**: 交易員審查和分析來自分析師的報告，仔細考慮以產生清晰的決策信號。他們在這些決策中附上詳細的報告，解釋其理由和支持證據，這些後來被風險管理团隊利用。

智能體仅在智能體間對話和辩論期間進行自然語言對話。這些簡潔、專註的討論已被證明能促進更深入的推理並整合多樣化的觀點，在複雜的長期場景中實現更平衡的決策——這種方法特別適用於交易的複雜環境。這種方法与我們的結構化框架無缝集成，因為對話狀態被記錄為整體智能體狀態內的結構化條目。

**III. 研究团隊**: 每個研究員智能體查詢全局智能體狀態以獲取分析師報告並仔細形成其意见。两個研究員代表對立的觀點：一個多头和一個空头。他們進行n轮自然語言對話，由辩論主持人智能體確定。最後，主持人審查辩論歷史，選擇占優势的觀點，並将其記錄為通信協议中的結構化條目。

**IV. 風險管理团隊**: 風險管理团隊，類似於研究团隊，查詢交易員的決策和隨附報告。然後他們從三個角度進行考慮——風險寻求、中性和風險保守——在風險約束內調整交易計劃。他們在主持人智能體的指導下進行n轮自然語言討論。

**V. 基金經理**: 基金經理審查來自風險管理团隊的討論，確定適當的風險調整，並在通信協议內更新交易員的決策和報告狀態。

### 4.3 骨干LLM

為了满足我們框架中任務的多樣化複雜性和速度需求，我們根據大語言模型(LLM)的優势战略性地選擇它們。快速思考模型，如gpt-4o-mini和gpt-4o，有效處理快速、低深度任務，如摘要、數據檢索和将表格數據轉換為文本。相比之下，深度思考模型如o1-preview在推理密集型任務中表現出色，如決策制定、基於證據的報告寫作和數據分析。這些模型利用其架構進行多轮推理，產生逻辑合理、深入的洞察。此外，我們優先考慮具有經過驗證的可靠性和可擴展性的模型，以確保在各種市場條件下的最佳性能。我們还為情绪分析等專門任務使用辅助專家模型。

具體來說，所有分析師節點依賴深度思考模型以確保穩健的分析，而快速思考模型處理來自API和工具的數據檢索以提高效率。研究員和交易員使用深度思考模型生成有價值的洞察並支持明智的決策。通過将LLM的選擇与每個任務的特定要求對齊，我們的框架在效率和推理深度之間實現了平衡，這對有效的交易策略至關重要。

這種實施策略確保TradingAgents可以在不需要GPU的情况下部署，仅依賴API積分。它还引入了骨干模型的無缝可交換性，使研究人員能夠在未來轻松地用任何本地托管或API可訪問的替代方案替換模型。這種適應性支持集成改進的推理模型或為特定任務定制的金融調優模型。因此，TradingAgents具有高度可擴展性和面向未來，提供灵活性以適應其任何智能體的任何骨干模型。

## 5. 實驗

### 5.1 模擬設置

我們使用從2024年1月1日到3月29日的综合回測模擬來評估TradingAgents框架，涵蓋包括苹果、英伟達、微软、Meta和谷歌在內的主要科技股。TradingAgents在模擬期間促進無缝的即插即用策略，使与任何基準的直接比較變得簡單。智能體仅基於每個交易日可用的數據做出決策，確保不使用未來數據(消除前瞻偏差)。基於他們的分析，TradingAgents生成买入、卖出或持有資產的交易信號，然後執行。之後，在進行下一天的數據之前計算分析指標。

我們与五種既定策略進行基準比較：买入持有、MACD、KDJ+RSI、ZMR和SMA(基準描述见附錄)。性能使用四個關键指標進行評估：累積收益(CR)、年化收益(AR)、夏普比率(SR)和最大回撤(MDD)(公式见附錄)。

### 5.2 回測交易

為了模擬現實的交易環境，我們利用包含各種股票如苹果、英伟達、微软、Meta、谷歌等的多資產和多模態金融數據集。我們的多模態數據集整合了歷史股價、新聞文章、社交媒體情绪、內部交易、財務報表和每個資產60個技術指標。數據集包括：

**歷史股價**: 2024年1月1日至3月29日的開盘價、最高價、最低價、收盘價、成交量和調整收盘價。

**新聞文章**: 從Bloomberg、Yahoo、EODHD、FinnHub和Reddit等多樣化來源收集的每日新聞更新，涵蓋特定公司發展、全球事件、宏觀經濟趋势和政府更新。

**社交媒體帖子和情绪**: 來自Reddit、X/Twitter和其他平台的帖子，以及由辅助語言模型計算的帖子情绪評分。

**內部情绪和交易**: 從公共信息中得出的情绪，包括來自SEDI的交易和相關公司文件。

**財務報表和收益報告**: 公司提交的季度和年度報告。

**公司概况和財務歷史**: 第三方報告的公司概况、目標行業和財務歷史的描述。

**技術指標**: 為每個資產計算的六十個標準技術分析指標，包括MACD、RSI、布林帶等。

## 6. 結果和分析

在本節中，我們展示實驗結果並分析TradingAgents相對於基準模型的性能。

### 6.1 性能比較

#### 累積和年度收益

表格和圖表顯示，我們的方法優於現有的基於規則的交易基準，特別是在以收益衡量的盈利能力方面。TradingAgents在三個採樣股票上至少實現了23.21%的累積收益和24.90%的年化收益，超過表現最佳的基準6.1%。值得註意的是，在苹果股票上——由於測試期間的市場波動性，這是一個特別具有挑战性的案例——傳統方法表現困難，因為它們的模式未能推廣到這種情况。相比之下，TradingAgents在這些不利條件下表現出色，在几個月內實現了超過26%的收益。

#### 夏普比率

夏普比率性能突出了TradingAgents在提供優越風險調整收益方面的卓越能力，超過了所有基準模型。這一結果强調了TradingAgents在平衡收益和風險方面的有效性——這是可持续和可預測投資增長的關键因素。TradingAgents始终優於买入持有和基於規則的策略等市場基準，展示了其適應性。其在保持受控風險敞口的同時最大化收益的能力為多智能體和基於辩論的自動化交易算法建立了坚實的基础。

**註釋**: 我們在3個月內對TradingAgents進行基準測試，這是由於密集的LLM和工具使用(每次預測需要11次LLM調用和20+次工具調用)。最高的夏普比率超過了我們預期的經驗範围(SR高於2為很好，高於3為優秀)。我們導出了TradingAgents的決策序列並檢查它們以確保計算的正確性。我們認為異常高的SR是由於在该期間TradingAgents很少出現回撤的現象。我們如實報告實驗中的結果。未來的工作将優化LLM推理和工具使用，以在有限預算下實現更長的回測。

#### 最大回撤

虽然基於規則的基準在控制風險方面表現出優越的性能，如其最大回撤分數所反映的，但它們在捕獲高收益方面表現不足。這種風險和回報之間的權衡强調了TradingAgents作為平衡方法的優势。尽管更高的收益通常与更高的風險相關，但TradingAgents相對於許多基準保持了相對較低的最大回撤。其有效的風險控制機制，通過風險控制智能體之間的辩論促進，確保最大回撤保持在可管理的限度內，不超過2。這展示了TradingAgents在最大化收益和有效管理風險之間取得穩健平衡的能力。

#### 可解釋性

當前深度學习交易方法的一個主要缺點是其密集、複雜的架構，通常使交易智能體的決策難以理解。這一挑战根植於AI可解釋性，對於在真實世界金融市場中運營的交易智能體至關重要，因為錯誤的決策可能導致嚴重損失。

相比之下，基於LLM的智能體框架提供了變革性優势：其決策以自然語言傳達，增强了可解釋性。為了說明這一點，我們在附錄中提供了TradingAgents單日的完整交易日誌，展示了其使用ReAct風格提示框架。每個決策都包括詳細的推理、工具使用和思維過程，使交易員能夠理解和調試系統。這種透明度使交易員能夠微調框架，考慮決策因素，相對於深度學习交易算法提供了優越的可解釋性。

### 6.2 討論

我們的結果表明，整合多個專業LLM智能體並促進智能體辩論顯著增强了交易性能。该框架有效地综合了多樣化的數據源和專家分析，使交易員智能體能夠做出针對特定風險概况的明智決策。包含反思智能體和專門的風險管理团隊在細化策略和緩解風險方面起着關键作用。因此，该框架在保持强大的風險管理指標的同時實現了卓越的收益捕獲，在最大化回報和最小化風險之間取得了最佳平衡。此外，多智能體LLM框架基於自然語言的操作確保了高可解釋性，使TradingAgents在透明度和互操作性方面相對於傳統和深度學习方法具有明顯優势。

## 7. 結論

我們介紹了TradingAgents，這是一個多智能體LLM金融交易框架，真實地模擬了交易公司環境，具有多個專業智能體參与智能體辩論和對話。利用LLM處理和分析多樣化金融數據源的先進能力，该框架能夠做出更明智的交易決策，同時利用多智能體交互通過在行動前進行全面推理和辩論來增强性能。

通過整合具有不同角色和風險概况的智能體，以及反思智能體和專門的風險团隊，TradingAgents相對於基準模型顯著改善了交易結果和風險管理。此外，這些智能體的協作性质確保了對變化市場條件的適應性。

實驗表明，TradingAgents在累積收益、夏普比率和其他關键財務指標方面優於傳統交易策略和基準。未來的工作将專註於在實時交易環境中部署该框架，擴展智能體角色，並整合實時數據源以進一步增强性能。

---

## 附錄

### A. 基準模型

我們将TradingAgents框架与几個基準進行比較：

- **买入持有**: 在所有選定股票中投資等額資金並在整個模擬期間持有。

- **MACD (移動平均收敛發散)**: 基於MACD線和信號線交叉點生成买卖信號的趋势跟蹤動量策略。

- **KDJ和RSI (相對强弱指數)**: 結合KDJ(隨機振荡器)和RSI(相對强弱指數)指標识別超买和超卖條件的動量策略。

- **ZMR (零均值回歸)**: 基於價格偏離零參考線和隨後回歸生成信號的均值回歸交易策略。

- **SMA (簡單移動平均)**: 基於短期和長期移動平均線交叉生成交易信號的趋势跟蹤策略。

### B. 評估指標

為了全面評估TradingAgents框架的性能，我們使用廣泛認可的指標來評估TradingAgents策略相對於基準方法的風險管理、盈利能力和安全性。

#### B.1 累積收益 (CR)

累積收益衡量模擬期間產生的总收益：

CR = ((V_end - V_start) / V_start) × 100%

其中V_end是模擬結束時的投資組合價值，V_start是初始投資組合價值。

#### B.2 年化收益 (AR)

年化收益将累積收益標準化為年數：

AR = ((V_end / V_start)^(1/N) - 1) × 100%

其中N是模擬中的年數。

#### B.3 夏普比率 (SR)

夏普比率通過比較投資組合相對於無風險利率的超額收益与其波動性來衡量風險調整收益：

SR = (R̄ - R_f) / σ

其中R̄是平均投資組合收益，R_f是無風險利率(如3個月國债收益率)，σ是投資組合收益的標準差。

#### B.4 最大回撤 (MDD)

最大回撤衡量投資組合價值的最大峰谷下降：

MDD = max_{t∈[0,T]} ((Peak_t - Trough_t) / Peak_t) × 100%

### C. AMZN和GOOGL的累積收益和交易歷史

我們提供了$AMZN和$GOOGL股票的額外圖表，以補充論文主體中討論的AAPL數據。這些補充視觉效果提供了我們交易框架在多個股票上性能的更廣阔視角，突出了TradingAgents結果的一致性和穩健性。

### D. TradingAgents系統運行案例研究 - 苹果股票(AAPL)

以下是TradingAgents系統针對苹果股票進行分析和決策的完整案例，展示了各個智能體的協作過程：

#### D.1 市場分析師团隊報告

**基於AAPL近期市場數據和選定技術指標的分析報告：**

**動量指標**
- **RSI (相對强弱指數)**: RSI值顯示顯著波動，特別是在11月5日和11月7日出現超买條件，RSI值分別達到100和89.85。這表明强劲的上涨動力，可能導致價格修正。期末RSI趋於穩定，表明適度的买入動力。

**趋势指標**
- **ADX (平均方向指數)**: 初期ADX值極高，表明强劲趋势，但隨後顯著下降，表明趋势强度减弱。這種模式暗示從强方向性運動向潜在整理階段的轉變。
- **超級趋势**: 超級趋势指標保持穩定，表明市場趋势穩定，波動性不大。這種穩定性可能表明整理階段，未來有突破的潜力。

**波動性指標**
- **ATR (平均真實範围)**: ATR值顯示市場波動性增加，表明價格波動幅度擴大，需要谨慎管理風險。

#### D.2 基本面分析師報告

**苹果公司基本面分析：**

**財務健康狀况**
- 市值：3.39万億美元，顯示公司規模庞大和市場主導地位
- P/E比率：33.26，表明相對於收益的高估值
- P/B比率：45.95，表明相對於账面價值的顯著溢價
- 债務股本比：1.96，表明適度的財務杠杆

**盈利能力指標**
- 毛利率：46.04%，顯示强劲的定價能力和運營效率
- 净利率：23.31%，表明優秀的盈利能力
- ROE：160.58%，顯示對股东權益的卓越回報

#### D.3 情绪分析師報告

**市場情绪分析：**

**社交媒體情绪**
- Reddit情绪評分：0.65 (積極)
- Twitter情绪評分：0.72 (積極)
- 整體情绪趋势：積極，投資者對苹果的創新能力和市場地位保持信心

**新聞情绪**
- 近期新聞主要關註苹果的AI技術發展和新產品發布
- 市場對苹果在人工智能領域的投資表示乐觀
- 地缘政治風險對情绪有轻微负面影響

#### D.4 研究团隊辩論

**多头研究員觀點：**
"基於當前的技術指標和基本面分析，我强烈建议买入苹果股票。RSI和MACD指標顯示上涨動力，積極的情绪峰值可能預示着有利的發展。苹果在AI和其他前沿技術方面的創新投資為未來增長奠定了基础。"

**空头研究員觀點：**
"虽然技術指標顯示一些積極信號，但我們必须考慮高估值風險。P/E比率33.26和P/B比率45.95表明苹果可能以溢價交易。內部人士的抛售活動也是一個警告信號。地缘政治緊张局势和經濟不確定性增加了投資風險。"

**辩論結論：**
經過深入辩論，多头觀點占據優势。尽管存在估值擔忧，但苹果的强劲基本面、創新能力和市場領導地位支持买入決策。

#### D.5 交易員決策

**交易決策：买入苹果股票**

**決策理由：**
1. 技術指標顯示上涨動力
2. 基本面强劲，盈利能力優秀
3. 市場情绪積極
4. 長期增長前景良好

**風險管理措施：**
- 設置止損订單以限制下行風險
- 分批建仓以降低時機風險
- 密切監控市場變化

#### D.6 風險管理团隊評估

**風險評估：**
- 市場風險：中等，考慮到當前波動性
- 流動性風險：低，苹果股票流動性充足
- 集中度風險：需要註意投資組合多樣化

**風險調整建议：**
- 将仓位限制在投資組合的合理比例內
- 使用期權策略對冲下行風險
- 定期重新評估投資論點

#### D.7 基金經理最终決策

**最终決策：批準买入苹果股票**

**決策摘要：**
基於投資計劃和多空觀點分析，我同意买入苹果(AAPL)股票的建议。苹果的强劲基本面、創新能力和市場領導地位超過了估值擔忧。建议的風險管理策略提供了谨慎的方法來緩解潜在風險。

---

**項目開源地址**: https://github.com/TauricResearch/TradingAgents

**許可證**: Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0)

---

*本文档是對原英文論文的完整中文翻譯，包含了詳細的案例研究，旨在為中文讀者提供對TradingAgents框架的全面理解。翻譯保持了原文的學術嚴谨性和技術準確性，並展示了系統的實际運行過程。*
